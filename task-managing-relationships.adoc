---
sidebar: sidebar 
permalink: task-managing-relationships.html 
keywords: sync, immediate, now, schedule, minutes, hours, on, off, delete, group, accelerate, accelerating, grouping, multiple data brokers, sync now, turn off, turn on, sync schedule, settings, change settings, recently modified files, delete files on target, retries, retry, file types, exclude file type, include file type, delete relationship 
summary: 您可以立即同步資料、變更排程等、隨時管理同步關係。 
---
= 管理同步關係
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以立即同步資料、變更排程等、隨時管理同步關係。



== 立即執行資料同步

您可以按下按鈕、在來源和目標之間立即同步資料、而不必等到下次排程同步。

.步驟
. 在 * 儀表板 * 中、瀏覽至同步關係、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
. 選擇 * 立即同步 * 、然後選擇 * 同步 * 進行確認。


.結果
BlueXP 複製與同步會啟動關係的資料同步程序。



== 加速同步效能

將額外的資料代理程式新增至管理關聯的群組、以加速同步關係的效能。額外的資料代理程式必須是 _new 資料代理程式。

.運作方式
如果資料代理人群組管理其他同步關係、則您新增至群組的新資料代理人也會加速這些同步關係的效能。

例如、假設您有三種關係：

* 關係1由資料代理群組A管理
* 關係2由資料代理群組B管理
* 關係3由資料代理群組A管理


您想要加速關係1的效能、以便將新的資料代理程式新增至資料代理群組A由於群組A也管理同步關係3、因此關係的同步效能也會自動加速。

.步驟
. 確保關係中至少有一家資料代理人處於線上狀態。
. 在 * 儀表板 * 中、瀏覽至同步關係、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
. 選擇 * 加速 * 。
. 依照提示建立新的資料代理程式。


.結果
BlueXP 複製與同步會將新的資料代理程式新增至群組。下一次資料同步的效能應該加快。



== Updateecre

您可以使用現有同步關係中來源或目標的最新認證來更新資料代理程式。如果您的安全性原則要求您定期更新認證資料、更新認證資料將有助益。

BlueXP 複製與同步需要認證的任何來源或目標都支援更新認證： Azure Blob 、 Box 、 IBM Cloud Object Storage 、 StorageGRID 、 ONTAP S3 Storage 、 SFTP 和 SMB 伺服器。

.步驟
. 從 * 同步儀表板 * 、前往需要認證的同步關係、然後選取 * 更新認證 * 。
+
image:screenshot_sync_update_credentials.png["快照顯示「同步關係」頁面上、來源或目標名稱正下方的「更新認證」選項。"]

. 輸入認證資料、然後選取 * 更新 * 。
+
SMB伺服器的相關注意事項：如果網域是新的、則您需要在更新認證時加以指定。如果網域尚未變更、您就不需要重新輸入。

+
如果您在建立同步處理關係時輸入網域、但在更新認證時並未輸入新網域、則 BlueXP 複本與同步會繼續使用您提供的原始網域。



.結果
BlueXP 複製與同步會更新資料代理程式上的認證。資料代理程式開始使用更新的認證資料進行同步之前、可能需要10分鐘的時間。



== 設定通知

每個同步關係的 * 通知 * 設定可讓您選擇是否要在 BlueXP 的通知中心接收 BlueXP 複本和同步通知。您可以啟用通知、以便成功同步資料、同步失敗資料及取消資料同步。

image:https://raw.githubusercontent.com/NetAppDocs/bluexp-copy-sync/main/media/screenshot-notification-center.png["在藍圖XP中顯示通知中心的快照。"]

此外、您也可以透過電子郵件接收通知。

.步驟
. 修改同步關係的設定：
+
.. 在 * 儀表板 * 中、瀏覽至同步關係、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
.. 選取 * 設定 * 。
.. 啟用*通知*。
.. 選取 * 儲存設定 * 。


. 如果您想要透過電子郵件接收通知、請設定警示和通知設定：
+
.. 選取 * 設定 > 警示與通知設定 * 。
.. 選取使用者或多位使用者、然後選擇*資訊*通知類型。
.. 選擇*應用*。




.結果
您現在會在 BlueXP 的通知中心收到 BlueXP 複本與同步通知、如果您已設定該選項、也會收到幾封電子郵件通知。



== 變更同步關係的設定

修改設定、定義如何在目標位置同步及維護來源檔案和資料夾。

. 在 * 儀表板 * 中、瀏覽至同步關係、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
. 選取 * 設定 * 。
. 修改任何設定。
+
image:screenshot_sync_settings.png["顯示同步關係設定的快照。"]

+
[[deleteonSOURS] 以下是每項設定的簡短說明：

+
排程:: 選擇週期性排程以供未來同步或關閉同步排程。您可以排程關係、每 1 分鐘同步一次資料。
同步逾時:: 定義 BlueXP 複製與同步是否應在指定的分鐘數、小時數或天數內完成同步時、取消資料同步。
通知:: 可讓您選擇是否在 BlueXP 的通知中心接收 BlueXP 複本與同步通知。您可以啟用通知、以便成功同步資料、同步失敗資料及取消資料同步。
+
--
如果您想要接收通知

--
重試次數:: 定義 BlueXP 複製與同步作業在略過檔案之前、應重試同步檔案的次數。
比較依據:: 選擇 BlueXP 複本與同步是否應比較某些屬性、以判斷檔案或目錄是否已變更、是否應重新同步。
+
--
即使您取消勾選這些屬性、 BlueXP 複製與同步仍會檢查路徑、檔案大小和檔案名稱、以比較來源與目標。如果有任何變更、就會同步這些檔案和目錄。

您可以選擇啟用或停用 BlueXP 複本與同步、以比較下列屬性：

** * mtime*：檔案的上次修改時間。此屬性對目錄無效。
** * uid*、* gid*和* mode*：Linux的權限旗標。


--
物件複本:: 建立關聯之後、您無法編輯此選項。
最近修改的檔案:: 選擇排除最近在排程同步之前修改的檔案。
刪除來源上的檔案:: 選擇在 BlueXP 複製後從來源位置刪除檔案、然後同步將檔案複製到目標位置。此選項包括資料遺失的風險、因為來源檔案在複製後會被刪除。
+
--
如果啟用此選項、您也需要變更資料代理程式上 local.json 檔案中的參數。開啟檔案並更新如下：

[source, json]
----
{
"workers":{
"transferrer":{
"delete-on-source": true
}
}
}
----
更新 local.json 檔案之後、您應該重新啟動： `pm2 restart all`。

--
刪除目標上的檔案:: 如果檔案已從來源中刪除、請選擇從目標位置刪除。預設值是從不從目標位置刪除檔案。
檔案類型:: 定義要包含在每個同步中的檔案類型：檔案、目錄、符號連結和硬式連結。
+
--

NOTE: 硬式連結僅適用於不安全的 NFS 與 NFS 關係。使用者只能使用一個掃描器程序和一個掃描器並行處理、而且必須從根目錄執行掃描。

--
排除檔案副檔名:: 輸入副檔名並按下 *Enter* ，指定要從同步中排除的 regex 或副檔名。例如、輸入 _log_ 或 _.log_ 以排除 * 。 log 檔案。多個副檔名不需要分隔符號。以下影片提供簡短示範：
+
--
video::video_file_extensions.mp4[width=840,height=240]

NOTE: regex 或規則運算式與萬用字元或 globb 運算式不同。此功能 * 僅 * 適用於 regex 。

--
排除目錄:: 輸入名稱或目錄完整路徑並按 *Enter* ，指定最多 15 個 regex 或目錄，以從同步中排除。根據預設、.copy卸載、.snapshot、~snapshot目錄都會排除。
+
--

NOTE: regex 或規則運算式與萬用字元或 globb 運算式不同。此功能 * 僅 * 適用於 regex 。

--
檔案大小:: 無論檔案大小為何、或只是特定大小範圍內的檔案、都可以選擇同步所有檔案。
修改日期:: 無論檔案上次修改日期、在特定日期之後修改的檔案、在特定日期之前修改的檔案、或是在某個時間範圍之間、都要選擇所有檔案。
建立日期:: 當SMB伺服器為來源時、此設定可讓您同步處理在特定日期之後、特定日期之前或特定時間範圍之間建立的檔案。
ACL -存取控制清單:: 只從 SMB 伺服器複製 ACL 、僅複製檔案、或從 SMB 伺服器複製 ACL 和檔案、方法是在建立關聯或建立關聯後啟用設定。


. 選取 * 儲存設定 * 。


.結果
BlueXP 複製與同步會修改與新設定的同步關係。



== 刪除關係

如果不再需要在來源與目標之間同步資料、您可以刪除同步關係。此動作不會刪除資料代理群組（或個別資料代理執行個體）、也不會從目標刪除資料。



=== 選項 1 ：刪除單一同步關係

.步驟
. 在 * 儀表板 * 中、瀏覽至同步關係、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
. 選擇 * 刪除 * ，然後再次選擇 * 刪除 * 進行確認。


.結果
BlueXP 複製與同步會刪除同步關係。



=== 選項 2 ：刪除多個同步關係

.步驟
. 在 * 儀表板 * 中、瀏覽至「建立新同步」按鈕、然後選取 image:icon-sync-action.png["按鈕的快照、可讓您針對同步關係採取行動"]
. 選擇要刪除的同步關係，選擇 * 刪除 * ，然後再次選擇 * 刪除 * 進行確認。


.結果
BlueXP 複製與同步會刪除同步關係。
